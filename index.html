<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOAQUIM V4.5 - MODO FOCO</title>
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; --law: #059669; --paper: #ffffff; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: #e2e8f0; color: #1e293b; }
        header { background: var(--primary); color: white; padding: 12px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid var(--accent); }
        .sidebar { width: 260px; background: #1e293b; color: white; padding: 20px; height: 100vh; position: sticky; top: 0; }
        .nav-btn { width: 100%; text-align: left; padding: 14px; margin-bottom: 8px; border: none; background: rgba(255,255,255,0.05); color: #cbd5e1; cursor: pointer; border-radius: 8px; font-size: 0.8rem; font-weight: 500; transition: 0.2s; }
        .nav-btn.active { background: var(--accent); color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.2); }
        
        .main-layout { display: flex; }
        .content-area { padding: 30px; flex-grow: 1; max-width: 1100px; margin: 0 auto; }

        /* FORMATA√á√ÉO ESTILO PETI√á√ÉO OAB */
        .oab-container { 
            background: var(--paper); padding: 60px; border-radius: 2px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.2); min-height: 1000px; 
            font-family: 'Times New Roman', Times, serif; font-size: 1.3rem; 
            line-height: 1.8; color: #000; text-align: justify; outline: none;
        }
        .oab-para { text-indent: 3em; margin-bottom: 1em; display: block; }
        .oab-head { font-weight: bold; text-align: center; display: block; text-transform: uppercase; margin: 1.5em 0; }

        .panel { background: #f8fafc; border: 1px solid #cbd5e1; padding: 20px; border-radius: 12px; margin-bottom: 25px; }
        .guia-box { display: none; margin-top: 15px; padding: 20px; background: #f0fdf4; border-left: 5px solid var(--law); border-radius: 4px; }
        .btn-acao { background: var(--law); color: white; border: none; padding: 15px; border-radius: 8px; font-weight: 800; width: 100%; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }
        .gab-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px; }
        .btn-gab { background: #475569; color: white; border: none; padding: 12px; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 0.8rem; }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 900; letter-spacing: 1px;">JOAQUIM <span style="font-weight: 300;">V4.5</span></div>
    <div id="cronometro" style="font-family: monospace; font-size: 1.2rem; color: #fbbf24;">00:00:00</div>
</header>

<div class="main-layout">
    <div class="sidebar" id="menuLateral"></div>
    <div class="content-area">
        <div class="panel">
            <div class="gab-grid" id="gabGrid"></div>
            <button class="btn-acao" onclick="toggleGuia()">üí° VER FUNDAMENTA√á√ÉO E GUIA</button>
            <div id="guiaBox" class="guia-box"></div>
        </div>
        <div class="oab-container" id="editor" contenteditable="true" spellcheck="false">
            Selecione uma pe√ßa ao lado para come√ßar...
        </div>
    </div>
</div>

<script src="gabaritos.js"></script>
<script>
    const lista = { rt: "Reclama√ß√£o Trabalhista", cont: "Contesta√ß√£o", ro: "Recurso Ordin√°rio", consigna: "Consigna√ß√£o" };
    let ativa = 'rt';
    let tempo = 0;

    function montar() {
        document.getElementById('menuLateral').innerHTML = Object.keys(lista).map(k => 
            `<button class="nav-btn ${k===ativa?'active':''}" onclick="carregar('${k}')">${lista[k]}</button>`
        ).join('');
        setInterval(() => {
            tempo++;
            const h = Math.floor(tempo/3600).toString().padStart(2,'0');
            const m = Math.floor((tempo%3600)/60).toString().padStart(2,'0');
            const s = (tempo%60).toString().padStart(2,'0');
            document.getElementById('cronometro').innerText = `${h}:${m}:${s}`;
        }, 1000);
    }

    function carregar(key) {
        ativa = key;
        const db = window.dbGabaritosExternos[key] || { guia: "Vazio", 1: "Vazio" };
        document.getElementById('guiaBox').innerHTML = `<div style="white-space:pre-wrap; line-height:1.6;">${db.guia}</div>`;
        
        let b = '';
        Object.keys(db).forEach(n => { if(!isNaN(n)) b += `<button class="btn-gab" onclick="verGab('${key}','${n}')">LER GABARITO ${n}</button>`; });
        document.getElementById('gabGrid').innerHTML = b;
        document.getElementById('editor').innerText = "AO DOUTO JU√çZO...";
        montar();
    }

    function verGab(p, n) {
        const txt = window.dbGabaritosExternos[p][n];
        const html = txt.split('\n').map(l => {
            const linha = l.trim();
            if(!linha) return '<br>';
            if(linha === linha.toUpperCase() && linha.length > 5) return `<div class="oab-head">${linha}</div>`;
            return `<div class="oab-para">${linha}</div>`;
        }).join('');
        const v = window.open("", "_blank", "width=800,height=900");
        v.document.write(`<html><head><style>
            body { font-family: 'Times New Roman'; padding: 50px; line-height: 2; font-size: 1.3rem; text-align: justify; }
            .oab-para { text-indent: 3em; margin-bottom: 1em; }
            .oab-head { font-weight: bold; text-align: center; margin: 1.5em 0; }
        </style></head><body>${html}</body></html>`);
    }

    function toggleGuia() {
        const box = document.getElementById('guiaBox');
        box.style.display = box.style.display === 'block' ? 'none' : 'block';
    }

    window.onload = montar;
</script>
</body>
</html>
