<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SISTEMA JOAQUIM - MENTORIA</title>
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; --bg: #f8fafc; --sidebar-bg: #1e293b; --postit-yellow: #fef9c3; --guia-bg: #ecfdf5; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: #334155; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        #login-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        #main-app { display: none; flex-direction: column; height: 100vh; width: 100%; }
        
        header { background: var(--primary); color: white; padding: 15px; text-align: center; font-weight: 800; border-bottom: 4px solid var(--accent); flex-shrink: 0; }
        
        .main-layout { display: flex; flex-grow: 1; overflow: hidden; }
        
        .sidebar { width: 250px; background: var(--sidebar-bg); padding: 15px; overflow-y: auto; flex-shrink: 0; border-right: 1px solid #334155; }
        .nav-btn { width: 100%; text-align: left; padding: 12px; margin-bottom: 6px; border: none; background: rgba(255,255,255,0.08); color: #f8fafc; cursor: pointer; border-radius: 6px; font-size: 0.8rem; transition: 0.2s; }
        .nav-btn:hover { background: rgba(255,255,255,0.15); }
        .nav-btn.active { background: var(--accent); font-weight: bold; }

        .content-area { flex-grow: 1; padding: 20px; overflow-y: auto; background: var(--bg); }
        #joaquim { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); min-height: 80vh; border: 1px solid #e2e8f0; max-width: 900px; margin: 0 auto; }

        .gabarito-panel { background: #f1f5f9; border: 2px solid var(--accent); padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .gab-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .gab-btn { background: var(--accent); color: white; border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 0.75rem; }
        .guia-btn { width: 100%; background: #10b981; color: white; border: none; padding: 12px; border-radius: 6px; font-weight: bold; margin-top: 10px; cursor: pointer; }
        
        .gab-content, .guia-content { display: none; margin-top: 15px; padding: 20px; background: white; border-radius: 8px; border: 1px solid #cbd5e1; white-space: pre-wrap; font-size: 1rem; line-height: 1.6; font-family: 'Times New Roman', serif; }
        .guia-content { background: var(--guia-bg); border-color: #10b981; color: #064e3b; }

        .copy-btn { width: 100%; margin-bottom: 20px; background: #10b981; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        #texto-final { outline: none; min-height: 500px; white-space: pre-wrap; margin-top: 20px; border-top: 2px dashed #cbd5e1; padding-top: 20px; font-family: 'Times New Roman', serif; font-size: 1.1rem; }
    </style>
</head>
<body>

<div id="login-screen">
    <button onclick="liberar()" style="padding:25px 50px; cursor:pointer; background:var(--accent); color:white; border:none; border-radius:8px; font-size:1.2rem; font-weight:bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">ENTRAR NO SISTEMA</button>
</div>

<div id="main-app">
    <header>SISTEMA JOAQUIM - MENTORIA JURﾃ好ICA</header>
    <div class="main-layout">
        <nav class="sidebar" id="menuLateral"></nav>
        <main class="content-area">
            <div id="joaquim">
                <div style="text-align:center; padding-top:100px; color:#94a3b8;">
                    <h2>Bem-vindo ao Sistema Joaquim</h2>
                    <p>Selecione uma peﾃｧa na barra lateral para comeﾃｧar.</p>
                </div>
            </div>
        </main>
    </div>
</div>

<script src="gabarito.js"></script>
<script>
    // Lista completa das suas 19 peﾃｧas
    const pecas = {
        'rt': '1. Reclamaﾃｧﾃ｣o Trabalhista',
        'consigna': '2. Consignaﾃｧﾃ｣o em Pagamento',
        'cont': '3. Contestaﾃｧﾃ｣o',
        'emb_exec': '4. Embargos ﾃ Execuﾃｧﾃ｣o',
        'ro': '5. Recurso Ordinﾃ｡rio',
        'ed': '6. Embargos de Declaraﾃｧﾃ｣o',
        'ap': '7. Agravo de Petiﾃｧﾃ｣o',
        'ai': '8. Agravo de Instrumento',
        'rr': '9. Recurso de Revista',
        'epe': '10. Exceﾃｧﾃ｣o Prﾃｩ-Executividade',
        'ms': '11. Mandado de Seguranﾃｧa',
        'ar': '12. Aﾃｧﾃ｣o Rescisﾃｳria',
        'inquerito': '13. Inquﾃｩrito Falta Grave',
        'cautelar': '14. Medida Cautelar',
        'replica': '15. Rﾃｩplica',
        'rade': '16. Recurso Adesivo',
        'emb_tst': '17. Embargos ao TST',
        're_stf': '18. Recurso Extraordinﾃ｡rio',
        'emb_terc': '19. Embargos de Terceiro'
    };

    function liberar() {
        document.getElementById('login-screen').style.display = 'none';
        document.getElementById('main-app').style.display = 'flex';
        montarMenu();
    }

    function montarMenu() {
        let h = '';
        Object.keys(pecas).forEach(k => {
            h += `<button class="nav-btn" id="btn_${k}" onclick="loadPeca('${k}')">${pecas[k]}</button>`;
        });
        document.getElementById('menuLateral').innerHTML = h;
    }

    function loadPeca(key) {
        // Busca no objeto do gabarito.js
        const dados = window.dbGabaritosExternos ? window.dbGabaritosExternos[key] : null;
        
        if (!dados) {
            alert("Conteﾃｺdo desta peﾃｧa ainda nﾃ｣o foi inserido no arquivo gabarito.js");
            return;
        }

        let botoes = '', blocos = '', guiaHtml = '';

        // Carrega os gabaritos numﾃｩricos
        Object.keys(dados).forEach(num => {
            if(!isNaN(num)) {
                let id = `gab_${key}_${num}`;
                botoes += `<button class="gab-btn" onclick="toggleC('${id}')">当 Ver Gabarito ${num}</button>`;
                blocos += `<div id="${id}" class="gab-content"><strong>GABARITO ${num}:</strong>\n\n${dados[num]}</div>`;
            }
        });

        // Carrega o Guia de Mentoria
        if(dados.guia) {
            guiaHtml = `
                <button class="guia-btn" onclick="toggleC('guia_${key}')">庁 DICAS DE MENTORIA (FUNDAMENTAﾃﾃグ)</button>
                <div id="guia_${key}" class="guia-content"><strong>POR QUE ESSA FUNDAMENTAﾃﾃグ?</strong>\n\n${dados.guia}</div>
            `;
        }

        document.getElementById('joaquim').innerHTML = `
            <button class="copy-btn" onclick="copyC()">COPIAR MINHA PETIﾃﾃグ</button>
            <div class="gabarito-panel">
                <div class="gab-grid">${botoes}</div>
                ${guiaHtml}
                ${blocos}
            </div>
            <div id="texto-final" contenteditable="true">ID: 936045\n\n(Escreva sua peﾃｧa aqui com base nos gabaritos acima...)</div>
        `;

        // Marca o botﾃ｣o ativo
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('btn_'+key).classList.add('active');
    }

    function toggleC(id) {
        const el = document.getElementById(id);
        const estaVisivel = el.style.display === 'block';
        // Fecha outros antes de abrir o novo
        document.querySelectorAll('.gab-content, .guia-content').forEach(d => d.style.display = 'none');
        el.style.display = estaVisivel ? 'none' : 'block';
    }

    function copyC() {
        const t = document.getElementById('texto-final').innerText;
        navigator.clipboard.writeText(t).then(() => {
            alert("Petiﾃｧﾃ｣o copiada com sucesso!");
        });
    }
</script>
</body>
</html>
