<!DOCTYPE html><html lang="pt-br"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"><title>ARYANNA MASTER PRO | 2026</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Courier+Prime&swap" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf_viewer.min.css"><style>
:root{--primary:#2563eb;--success:#059669;--warning:#f59e0b;--bg-site:#f8fafc;--gold:#d4af37;--pen-blue:#1e3a8a;--paper:#ffffff;--text:#1e293b;--toolbar-bg:#ffffff;--border:#cbd5e1}.dark-mode{--paper:#1e293b;--pen-blue:#93c5fd;--bg-site:#0f172a;--text:#f1f5f9;--toolbar-bg:#1e293b;--border:#334155}*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Inter',sans-serif;background:var(--bg-site);height:100vh;display:flex;flex-direction:column;overflow:hidden;color:var(--text)}header{background:#1e293b;padding:0 15px;border-bottom:2px solid var(--gold);display:flex;justify-content:space-between;align-items:center;height:45px;z-index:1001}.logo{font-weight:800;color:var(--gold);font-size:.8rem}.main-container{flex:1;display:flex;overflow:hidden;position:relative}.editor-section{flex:1;display:flex;flex-direction:column;background:var(--bg-site);border-right:1px solid var(--border);min-width:0}.toolbar{background:var(--toolbar-bg);padding:8px;display:flex;gap:5px;border-bottom:1px solid var(--border);align-items:center;overflow-x:auto}.btn-symbol{height:36px;min-width:40px;border-radius:8px;border:1px solid var(--border);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;background:var(--toolbar-bg);color:var(--text);flex-shrink:0}.paper-wrapper{flex:1;overflow-y:auto;padding:10px;background:rgba(0,0,0,.1)}.paper-sheet{width:100%;max-width:800px;background:var(--paper);min-height:2500px;display:flex;margin:0 auto;box-shadow:0 4px 15px rgba(0,0,0,.2)}.line-nums{width:35px;background:rgba(0,0,0,.03);border-right:1px solid var(--border);text-align:center;color:#94a3b8;font-size:11px;padding-top:15px;line-height:28px}.text-area{flex:1;border:none;outline:none;padding:11px 15px;font-size:16px;line-height:28px;color:var(--pen-blue);background-image:linear-gradient(transparent,transparent 27px,var(--border) 28px);background-size:100% 28px;background-attachment:local;resize:none;background-color:transparent}.viewer-section{flex:1.2;display:flex;flex-direction:column;background:#334155;min-width:0;position:relative}.tabs{display:flex;background:#1e293b;padding:5px 5px 0;gap:3px;z-index:10}.tab{padding:8px 12px;border:none;border-radius:5px 5px 0 0;background:#0f172a;color:#94a3b8;font-size:.7rem;cursor:pointer}.tab.active{background:var(--bg-site);color:var(--primary);font-weight:700}#pdf-viewport{flex:1;overflow-y:auto;background:#525659;padding:10px 0}.page-container{position:relative;margin:0 auto 15px;background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.3);overflow:hidden}canvas{display:block;width:100%!important;height:auto!important}.textLayer{position:absolute;inset:0;overflow:hidden;opacity:.2;line-height:1}.textLayer>span{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0 0}.modal-full{display:none;position:fixed;inset:0;background:var(--bg-site);z-index:9999;flex-direction:column}.modal-header{background:#1e293b;color:#fff;padding:0 15px;display:flex;align-items:center;border-bottom:2px solid var(--gold);height:50px;gap:10px}.modal-body{flex:1;overflow-y:auto;padding:15px}.espelho-item{background:var(--paper);border:1px solid var(--border);padding:10px;margin-bottom:8px;border-radius:6px;display:flex;align-items:center;gap:10px}.espelho-pt{font-weight:800;color:var(--primary);font-size:.75rem}.nota-floating{position:sticky;top:0;background:var(--gold);color:#000;padding:10px;text-align:center;font-weight:900;border-radius:8px;margin-bottom:15px;z-index:10}
</style></head><body class="dark-mode">
<header><div class="logo">ARYANNA MASTER 2026</div><div id="timer-display" style="color:var(--warning);font-family:'Courier Prime';font-weight:700">05:00:00</div></header>
<div class="main-container"><section class="editor-section"><div class="toolbar">
<select id="exam-select" onchange="window.mudarExame()" class="btn-symbol"></select>
<button class="btn-symbol" onclick="window.toggleEstruturas()">âš–ï¸</button>
<button class="btn-symbol" onclick="window.abrirModal('modal-respostas')">ğŸ“š</button>
<button class="btn-symbol" onclick="window.abrirModal('modal-espelho')">ğŸ¯</button>
<button class="btn-symbol" onclick="window.abrirModal('modal-dicas')">ğŸ’¡</button>
<button class="btn-symbol" onclick="window.abrirModal('modal-nc')">ğŸ“Œ</button>
<button class="btn-symbol" onclick="window.location.href='mentoria.html'">ğŸ†</button>
<button class="btn-symbol" style="background:var(--success);color:#fff;margin-left:auto;" onclick="window.finalizarManual()">ğŸ’¾</button>
</div><div class="paper-wrapper"><div class="paper-sheet"><div class="line-nums" id="ln-main"></div><textarea id="texto-final" class="text-area" spellcheck="false" oninput="window.autoSave()" placeholder="Inicie sua peÃ§a..."></textarea></div></div></section>
<section class="viewer-section" id="section-pdf"><div class="tabs">
<button id="tab-prova" class="tab active" onclick="window.carregarPDF('prova')">PROVA</button>
<button id="tab-gabarito" class="tab" onclick="window.carregarPDF('gabarito')">GABARITO</button>
<button id="tab-vade" class="tab" onclick="window.carregarPDF('vade')">VADE</button>
</div><div id="pdf-viewport"></div></section></div>

<div id="menu-estruturas" style="display:none;position:absolute;top:50px;left:20px;background:var(--toolbar-bg);border-radius:8px;box-shadow:0 5px 20px rgba(0,0,0,.3);z-index:5000;width:280px;border:1px solid var(--border);max-height:80vh;overflow-y:auto"></div>

<div id="modal-espelho" class="modal-full"><div class="modal-header"><button onclick="window.fecharModal('modal-espelho')">â† VOLTAR</button><h3>ESPELHO FGV</h3></div><div class="modal-body"><div class="nota-floating">NOTA: <span id="nota-valor">0.00</span> / 5.00</div><div id="checklist-fgv"></div></div></div>
<div id="modal-respostas" class="modal-full"><div class="modal-header"><button onclick="window.fecharModal('modal-respostas')">â† VOLTAR</button><h3>FOLHA DE RESPOSTAS</h3></div><div class="modal-body"><div class="paper-sheet"><div class="line-nums" id="ln-res"></div><textarea id="res-editor" class="text-area" oninput="window.saveMeta('v3_respostas', this.value)"></textarea></div></div></div>
<div id="modal-dicas" class="modal-full"><div class="modal-header"><button onclick="window.fecharModal('modal-dicas')">â† VOLTAR</button><h3>DICAS</h3></div><div class="modal-body"><div class="paper-sheet"><div class="line-nums" id="ln-dicas"></div><textarea id="dicas-editor" class="text-area" oninput="window.saveMeta('v3_dicas', this.value)"></textarea></div></div></div>
<div id="modal-nc" class="modal-full"><div class="modal-header"><button onclick="window.fecharModal('modal-nc')">â† VOLTAR</button><h3>POST-ITS / TESES</h3></div><div class="modal-body"><div id="box-teses"></div><button onclick="window.addNCField('box-teses', 'input')">+ Tese</button><div id="box-explica"></div><button onclick="window.addNCField('box-explica', 'textarea')">+ Detalhe</button><button onclick="window.saveNC()" style="width:100%;margin-top:20px;padding:15px;background:var(--success);color:#fff;border:none;border-radius:8px;font-weight:700">SALVAR POST-ITS</button></div></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
const config = { apiKey: "AIzaSyAmigODFK8R9c0-fWtagdxLWu9xkODfKYQ", authDomain: "masteroab-db5e1.firebaseapp.com", projectId: "masteroab-db5e1", databaseURL: "https://masteroab-db5e1-default-rtdb.firebaseio.com" };
const app = initializeApp(config); const db = getDatabase(app);
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

window.MEUS_ESPELHOS = {
    "44": `
        <div class="nota-floating">ESPELHO OFICIAL - EXAME 44 (CONTESTAÃ‡ÃƒO)</div>
        <div class="espelho-item"><input type="checkbox" value="0.10" onchange="window.calcNota()"><div class="espelho-txt">EndereÃ§amento: 150Âª Vara do Trabalho de Manaus</div><div class="espelho-pt">0.10</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.30" onchange="window.calcNota()"><div class="espelho-txt">IndicaÃ§Ã£o reclamados, reclamante e Art. 847 CLT</div><div class="espelho-pt">0.30</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">Preliminar: Ilegitimidade passiva dos sÃ³cios (Art. 50 CCB)</div><div class="espelho-pt">0.40</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">Preliminar: InÃ©pcia do reenquadramento (Art. 330, Â§ 1Âº, I ou Art. 337, IV CPC)</div><div class="espelho-pt">0.40</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">Prejudicial: PrescriÃ§Ã£o parcial - anterior a 28/04/2020 (Art. 7Âº, XXIX CF ou Art. 11 CLT)</div><div class="espelho-pt">0.40</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Ticket refeiÃ§Ã£o - ausÃªncia de ultratividade (Art. 614, Â§ 3Âº CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Aviso prÃ©vio - indevida reduÃ§Ã£o pedido demissÃ£o (Art. 488 CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Periculosidade - nÃ£o era trabalhadora em moto (Art. 193, Â§ 4Âº CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: ReintegraÃ§Ã£o - garantia encerrada ou pedido demissÃ£o (SÃºmula 244, II TST ou Art. 10, II, b ADCT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Vale transporte - uso de moto prÃ³pria (Lei 7.418/85 ou Dec. 10.854/21)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.90" onchange="window.calcNota()"><div class="espelho-txt">Pedidos (RenovaÃ§Ã£o preliminares/improcedÃªncia/provas/honorÃ¡rios) e Fechamento</div><div class="espelho-pt">0.90</div></div>
    `,
    "43": "",
    "42": "",
    "41": `
        <div class="nota-floating">ESPELHO OFICIAL - EXAME 41 (AGRAVO DE PETIÃ‡ÃƒO)</div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">EndereÃ§amento (503Âª VT/DF) e RazÃµes ao TRT</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Partes (Maria Serra e Jeferson Peres)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.10" onchange="window.calcNota()"><div class="espelho-txt">Fundamento: Art. 855-A, Â§ 1Âº, II ou Art. 897, 'a' CLT</div><div class="espelho-pt">0.10</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">DelimitaÃ§Ã£o justificada matÃ©rias (Art. 897, Â§ 1Âº CLT)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Tempestividade 8 dias (Art. 897, caput CLT)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.70" onchange="window.calcNota()"><div class="espelho-txt">Tese: Juiz nÃ£o poderia instaurar IDPJ de ofÃ­cio (Art. 133 CPC)</div><div class="espelho-pt">0.70</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.70" onchange="window.calcNota()"><div class="espelho-txt">Tese: SuspensÃ£o do processo (Art. 134, Â§ 3Âº CPC ou Art. 855-A, Â§ 2Âº CLT)</div><div class="espelho-pt">0.70</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.70" onchange="window.calcNota()"><div class="espelho-txt">Tese: Prazo manifestaÃ§Ã£o 15 dias desrespeitado (Art. 135 CPC)</div><div class="espelho-pt">0.70</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.80" onchange="window.calcNota()"><div class="espelho-txt">Tese: Ilegitimidade (saÃ­da hÃ¡ +2 anos ou nÃ£o era sÃ³cia na admissÃ£o) - Art. 10-A CLT</div><div class="espelho-pt">0.80</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.70" onchange="window.calcNota()"><div class="espelho-txt">Tese: Impenhorabilidade aposentadoria (Art. 833, IV ou Art. 529, Â§ 3Âº CPC)</div><div class="espelho-pt">0.70</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">Pedidos (RevogaÃ§Ã£o tutela/levantamento penhora/conhecimento e provimento) e Fechamento</div><div class="espelho-pt">0.50</div></div>
    `,
    "40": `
        <div class="nota-floating">ESPELHO OFICIAL - EXAME 40 (RECLAMAÃ‡ÃƒO TRABALHISTA)</div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">EndereÃ§amento VT Osasco/SP e Art. 840, Â§ 1Âº CLT</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">QualificaÃ§Ã£o EspÃ³lio/Julieta e Distribuidora Capuleto Ltda.</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Gratuidade de justiÃ§a (Art. 790, Â§ 3Âº ou Â§ 4Âº CLT)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Prioridade tramitaÃ§Ã£o idosa (Art. 1048 CPC ou Art. 71 Lei 10.741)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">Reconhecimento vÃ­nculo/anotaÃ§Ã£o CTPS (Art. 3Âº ou Art. 29 CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">Verbas: Saldo, 13Âº, FÃ©rias, FGTS e Multa Art. 477, Â§ 8Âº CLT</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="1.60" onchange="window.calcNota()"><div class="espelho-txt">Dano Material: Enterro, Seguro Vida, PensÃ£o Morte e PensÃ£o Empregador (Art. 186/927/948 CCB)</div><div class="espelho-pt">1.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">Dano Moral acidente (Art. 223-B/C/G CLT ou 186/927/944 CCB)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">HonorÃ¡rios advocatÃ­cios (Art. 791-A CLT)</div><div class="espelho-pt">0.40</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.70" onchange="window.calcNota()"><div class="espelho-txt">Pedidos (ProcedÃªncia/Valores estimados) e Fechamento</div><div class="espelho-pt">0.70</div></div>
    `,
    "39": "",
    "38": "",
    "37": `
        <div class="nota-floating">ESPELHO OFICIAL - EXAME 37 (CONTESTAÃ‡ÃƒO)</div>
        <div class="espelho-item"><input type="checkbox" value="0.30" onchange="window.calcNota()"><div class="espelho-txt">EndereÃ§amento (85Âª VT/RJ), PeÃ§a Jorge Machado e Art. 847 CLT</div><div class="espelho-pt">0.30</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">Preliminar: Adiamento audiÃªncia (Art. 841 CLT)</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">Preliminar: Ilegitimidade Jorge (saÃ­da hÃ¡ +2 anos) - Art. 10-A CLT ou 1.003 CC</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Adicional transferÃªncia (sem mudanÃ§a domicÃ­lio) - Art. 469 CLT</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Horas in itinere (deslocamento nÃ£o Ã© disposiÃ§Ã£o) - Art. 58, Â§ 2Âº CLT</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Intervalo digitador (nÃ£o era a funÃ§Ã£o) - Art. 72 CLT ou SÃºmula 346 TST</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: AcÃºmulo de tarefas (inseridas na funÃ§Ã£o) - Art. 456, p.u. CLT</div><div class="espelho-pt">0.60</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">Pedidos: RenovaÃ§Ã£o preliminares e extinÃ§Ã£o ex-sÃ³cio</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.60" onchange="window.calcNota()"><div class="espelho-txt">Requerimentos (ImprocedÃªncia/Provas/HonorÃ¡rios Art. 791-A) e Fechamento</div><div class="espelho-pt">0.60</div></div>
    `,
    "36": "",
    "35": `
        <div class="nota-floating">ESPELHO OFICIAL - EXAME 35 (RECURSO ORDINÃRIO)</div>
        <div class="espelho-item"><input type="checkbox" value="0.30" onchange="window.calcNota()"><div class="espelho-txt">EndereÃ§amento (89Âª VT Floriano/PI), razÃµes ao TRT e Art. 895, I CLT</div><div class="espelho-pt">0.30</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Partes (Sociedade empresÃ¡ria recorrente e empregado recorrido)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.20" onchange="window.calcNota()"><div class="espelho-txt">Tempestividade (8 dias) e Preparo (Custas/DepÃ³sito Recursal)</div><div class="espelho-pt">0.20</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">PrescriÃ§Ã£o parcial: arguida em instÃ¢ncia ordinÃ¡ria (SÃºmula 153 TST ou Art. 193 CC)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Intervalo interjornada de 11h observado (Art. 66 CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Indevida reintegraÃ§Ã£o (estabilidade sÃ³ p/ dirigente sindical) - Art. 543 CLT ou Art. 8Âº, VIII CF</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: FGTS indevido por suspensÃ£o contratual (Art. 476 CLT ou Art. 15, Â§5Âº Lei 8036)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Ajuda de custo - natureza indenizatÃ³ria (Art. 457, Â§2Âº CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: EquiparaÃ§Ã£o indevida - estabelecimentos distintos (Art. 461 CLT)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.50" onchange="window.calcNota()"><div class="espelho-txt">MÃ©rito: Insalubridade indevida por reclassificaÃ§Ã£o (Art. 194 CLT ou SÃºmula 248 TST)</div><div class="espelho-pt">0.50</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">HonorÃ¡rios indevidos (improcedÃªncia) ou limite 15% (Art. 791-A CLT)</div><div class="espelho-pt">0.40</div></div>
        <div class="espelho-item"><input type="checkbox" value="0.40" onchange="window.calcNota()"><div class="espelho-txt">Requerimentos (Conhecimento/Provimento/Reforma/Acolhimento PrescriÃ§Ã£o) e Fechamento</div><div class="espelho-pt">0.40</div></div>
    `
};
    const QUALIF = "nacionalidade..., estado civil..., profissÃ£o..., portador da cÃ©dula de identidade RG nÂº..., inscrito no CPF sob o nÂº..., endereÃ§o eletrÃ´nico..., residente e domiciliado na...";
const SALTO = "\n\n\n\n\n\n\n\n\n\n";

const pecas = {
    RT: `AO JUÃZO DA... VARA DO TRABALHO DE...${SALTO}RECLAMANTE, ${QUALIF}, por seu advogado abaixo subscrito, vem propor RECLAMAÃ‡ÃƒO TRABALHISTA (Art. 840, Â§ 1Âº, da CLT)...`,
    CON: `AO JUÃZO DA... VARA DO TRABALHO DE...${SALTO}Processo nÂº...\nRECLAMADA, jÃ¡ qualificada, vem apresentar CONTESTAÃ‡ÃƒO (Art. 847 da CLT)...`,
    RO: `AO JUÃZO DA... VARA DO TRABALHO DE...${SALTO}Processo nÂº...\nRECORRENTE, vem interpor RECURSO ORDINÃRIO (Art. 895, I, da CLT)...`,
    AP: `AO JUÃZO DA... VARA DO TRABALHO DE...${SALTO}Processo nÂº...\nAGRAVANTE, vem interpor AGRAVO DE PETIÃ‡ÃƒO (Art. 897, 'a', da CLT)...`
};

let currentPdf = null;
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => { if (entry.isIntersecting) renderPage(parseInt(entry.target.dataset.pagenum), entry.target); });
}, { root: document.getElementById('pdf-viewport'), threshold: 0.1 });

window.carregarPDF = async (tipo) => {
    const ex = document.getElementById('exam-select').value;
    const arq = tipo === 'prova' ? `ro${ex}.pdf` : tipo === 'gabarito' ? `ro${ex}-gabarito.pdf` : `vade.pdf`;
    const v = document.getElementById('pdf-viewport'); v.innerHTML = "";
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(`tab-${tipo}`).classList.add('active');
    try {
        currentPdf = await pdfjsLib.getDocument(arq).promise;
        for (let i = 1; i <= currentPdf.numPages; i++) {
            const c = document.createElement('div'); c.className = 'page-container'; c.dataset.pagenum = i;
            v.appendChild(c); observer.observe(c);
        }
    } catch(e) { v.innerHTML = "<p style='color:#fff;padding:20px'>Arquivo nÃ£o encontrado.</p>"; }
};

async function renderPage(num, container) {
    if (container.dataset.rendered) return; container.dataset.rendered = "true";
    const page = await currentPdf.getPage(num);
    const vp = page.getViewport({ scale: (document.getElementById('pdf-viewport').clientWidth - 30) / page.getViewport({scale:1}).width });
    container.style.height = vp.height + "px";
    const canvas = document.createElement('canvas'); canvas.height = vp.height; canvas.width = vp.width;
    container.appendChild(canvas);
    await page.render({ canvasContext: canvas.getContext('2d'), viewport: vp }).promise;
    const tl = document.createElement('div'); tl.className = 'textLayer'; container.appendChild(tl);
    const content = await page.getTextContent();
    pdfjsLib.renderTextLayer({ textContent: content, container: tl, viewport: vp, textDivs: [] });
}

window.calcNota = () => {
    let t = 0; document.querySelectorAll('#checklist-fgv input:checked').forEach(i => t += parseFloat(i.value));
    document.getElementById('nota-valor').innerText = t.toFixed(2);
};

window.saveMeta = (p, v) => set(ref(db, `${p}/exame_${document.getElementById('exam-select').value}`), v);

window.autoSave = () => { 
    clearTimeout(window.sv); 
    window.sv = setTimeout(() => window.saveMeta('v3_treino', document.getElementById('texto-final').value), 1000); 
};

window.mudarExame = () => {
    const ex = document.getElementById('exam-select').value;
    window.carregarPDF('prova');
    document.getElementById('checklist-fgv').innerHTML = window.MEUS_ESPELHOS[ex] || '<p style="opacity:0.5; color:white; padding:20px">Espelho pendente para este exame.</p>';
    document.getElementById('nota-valor').innerText = "0.00";
    get(ref(db, `v3_treino/exame_${ex}`)).then(s => document.getElementById('texto-final').value = s.val() || "");
    get(ref(db, `v3_respostas/exame_${ex}`)).then(s => document.getElementById('res-editor').value = s.val() || "");
    get(ref(db, `v3_dicas/exame_${ex}`)).then(s => document.getElementById('dicas-editor').value = s.val() || "");
};

window.toggleEstruturas = () => {
    const m = document.getElementById('menu-estruturas');
    if(m.style.display === 'none') {
        m.innerHTML = Object.keys(pecas).map(k => `<div onclick="window.inserirPeÃ§a('${k}')" style="padding:12px; border-bottom:1px solid var(--border); cursor:pointer; color:var(--text); font-size:0.85rem; font-weight:bold">${k}</div>`).join('');
        m.style.display = 'block';
    } else m.style.display = 'none';
};

window.inserirPeÃ§a = (k) => {
    document.getElementById('texto-final').value = pecas[k];
    document.getElementById('menu-estruturas').style.display = 'none';
    window.autoSave();
};

window.addNCField = (id, tag) => { 
    const el = document.createElement(tag); 
    el.style.width="100%"; el.style.marginBottom="8px"; el.style.padding="8px"; el.style.borderRadius="4px";
    document.getElementById(id).appendChild(el); 
};

window.saveNC = () => {
    const t = [...document.querySelectorAll('#box-teses input')].map(i => i.value);
    const d = [...document.querySelectorAll('#box-explica textarea')].map(i => i.value);
    set(ref(db, `v3_nc/exame_${document.getElementById('exam-select').value}`), { t, d }).then(() => alert("Post-its e Teses salvos com sucesso!"));
};

window.abrirModal = id => document.getElementById(id).style.display = 'flex';
window.fecharModal = id => document.getElementById(id).style.display = 'none';

window.finalizarManual = () => {
    window.saveMeta('v3_treino', document.getElementById('texto-final').value);
    alert("Progresso sincronizado no banco de dados.");
};

// Setup Inicial
const s = document.getElementById('exam-select');
for(let i=45; i>=1; i--) { 
    let n = i<10?"0"+i:i; let o = document.createElement('option'); o.value=n; o.innerText=`EXAME ${n}`; 
    if(i==44) o.selected=true; s.appendChild(o); 
}

document.getElementById('ln-main').innerHTML = Array.from({length:350}, (_,i)=>i+1).join('<br>');
document.getElementById('ln-res').innerHTML = Array.from({length:100}, (_,i)=>i+1).join('<br>');
document.getElementById('ln-dicas').innerHTML = Array.from({length:100}, (_,i)=>i+1).join('<br>');

window.mudarExame();
</script></body></html>
