<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>MASTER PRO | ARYANNA 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --bg: #0a0c10; --card: #161a22; --accent: #3b82f6; --danger: #ef4444; --success: #10b981; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* CABE√áALHO PREMIUM */
        header { padding: 12px 25px; display: flex; justify-content: space-between; align-items: center; background: #000; border-bottom: 2px solid var(--gold); }
        .brand { font-weight: 800; color: var(--gold); display: flex; align-items: center; gap: 8px; }
        #timer-display { font-size: 1.2rem; font-weight: 300; color: white; cursor: pointer; border: 1px solid #333; padding: 2px 10px; border-radius: 5px; }
        .cloud-status { font-size: 0.6rem; color: var(--success); font-weight: 800; text-transform: uppercase; }

        /* GRID DE EXAMES (HIST√ìRICO DE PROVAS) */
        .exam-bar { display: flex; gap: 15px; overflow-x: auto; padding: 10px 25px; background: #111; scrollbar-width: none; }
        .exam-bar::-webkit-scrollbar { display: none; }
        .btn-ex { font-size: 0.7rem; font-weight: 700; color: #555; background: none; border: none; cursor: pointer; transition: 0.2s; white-space: nowrap; }
        .btn-ex.active { color: var(--gold); transform: scale(1.1); }

        /* WORKSPACE */
        .workspace { flex: 1; display: flex; overflow: hidden; }

        /* COLUNA RESPOSTA (FOLHA FGV) */
        .col-paper { flex: 1.2; display: flex; flex-direction: column; background: white; position: relative; }
        .paper-header { padding: 8px 15px; background: #f1f5f9; border-bottom: 1px solid #cbd5e1; display: flex; justify-content: space-between; align-items: center; }
        .paper-header select { border: 1px solid #cbd5e1; background: white; padding: 5px; font-size: 0.65rem; font-weight: 800; border-radius: 4px; }
        .paper-body { flex: 1; display: flex; overflow-y: auto; }
        .lines { width: 35px; background: #f8fafc; border-right: 1px solid #e2e8f0; text-align: center; color: #cbd5e1; font-size: 11px; line-height: 28px; padding-top: 15px; }
        .textarea-fgv { flex: 1; border: none; outline: none; padding: 15px 20px; font-family: 'Caveat', cursive; font-size: 24px; line-height: 28px; background-image: linear-gradient(transparent, transparent 27px, #f1f5f9 28px); background-size: 100% 28px; background-attachment: local; color: #1e293b; }

        /* COLUNA PDF E RECURSOS */
        .col-resources { flex: 1.5; display: flex; flex-direction: column; background: #222; position: relative; border-left: 2px solid #000; }
        .tab-bar { display: flex; background: #000; height: 45px; }
        .tab { flex: 1; border: none; background: #111; color: #666; font-size: 0.7rem; font-weight: 800; cursor: pointer; border-bottom: 2px solid transparent; }
        .tab.active { background: #fff; color: #004a8d; border-bottom: 2px solid var(--gold); }
        iframe { flex: 1; border: none; background: #444; }

        /* BOT√ïES FLUTUANTES (GATILHOS DE PE√áA E SOS) */
        .fab-container { position: absolute; bottom: 25px; left: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
        .btn-fab { width: 45px; height: 45px; border-radius: 12px; background: var(--card); border: 1.5px solid var(--gold); color: white; font-weight: 800; font-size: 0.65rem; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.5); transition: 0.2s; }
        .btn-fab:hover { background: var(--gold); color: black; }
        .btn-sos { background: var(--danger); border-color: white; }

        /* MODAL */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 5000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal { background: white; color: #1e293b; width: 100%; max-width: 600px; border-radius: 12px; overflow: hidden; }
        .modal-h { padding: 15px; background: #004a8d; color: white; font-weight: 800; display: flex; justify-content: space-between; }
        .modal-b { padding: 20px; max-height: 75vh; overflow-y: auto; }

        /* POST-IT */
        .postit { position: absolute; bottom: 20px; right: 20px; width: 210px; background: #fef08a; border-radius: 8px; padding: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: rotate(1deg); border-bottom: 3px solid #eab308; }
        .postit textarea { width: 100%; height: 85px; background: transparent; border: none; outline: none; font-family: 'Caveat', cursive; font-size: 1.2rem; color: #854d0e; resize: none; }

        #mobile-nav { display: none; position: fixed; bottom: 20px; right: 20px; z-index: 4000; background: var(--gold); border: none; width: 60px; height: 60px; border-radius: 50%; font-weight: 900; box-shadow: 0 0 20px var(--gold); }

        @media (max-width: 1024px) {
            .col-resources { position: absolute; inset: 0; z-index: 500; display: none; }
            .col-resources.active { display: flex; }
            #mobile-nav { display: block; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand">ARYANNA MASTER PRO <span class="cloud-status">‚óè FIREBASE SYNC</span></div>
    <div id="timer-display" onclick="toggleTimer()">05:00:00</div>
    <button onclick="saveArchive()" style="background:var(--success); color:white; border:none; padding:6px 15px; border-radius:5px; font-weight:800; font-size:0.7rem; cursor:pointer">ARQUIVAR ESTUDO</button>
</header>

<div class="exam-bar" id="exam-grid"></div>

<main class="workspace">
    <section class="col-paper">
        <div class="paper-header">
            <select id="mode-selector" onchange="changeMode(this.value)">
                <option value="peca">PE√áA PR√ÅTICO-PROFISSIONAL (150 LINHAS)</option>
                <option value="quest">QUEST√ïES DISCURSIVAS (120 LINHAS)</option>
            </select>
        </div>
        <div class="paper-body">
            <div class="lines" id="line-nums"></div>
            <textarea id="editor" class="textarea-fgv" spellcheck="false" oninput="handleTyping()" placeholder="Inicie sua fundamenta√ß√£o..."></textarea>
        </div>

        <div class="fab-container">
            <button class="btn-fab" onclick="applyStruct('rt')">RT</button>
            <button class="btn-fab" onclick="applyStruct('cont')">CT</button>
            <button class="btn-fab" onclick="applyStruct('ro')">RO</button>
            <button class="btn-fab" onclick="applyStruct('ap')">AP</button>
            <button class="btn-fab btn-sos" onclick="showSOS()">SOS</button>
            <button class="btn-fab" onclick="showHistory()" style="background:white; color:black">HIST</button>
        </div>
    </section>

    <section class="col-resources" id="res-area">
        <div class="tab-bar">
            <button class="tab active" id="tab-p" onclick="setDoc('prova')">ENUNCIADO</button>
            <button class="tab" id="tab-g" onclick="setDoc('gab')">GABARITO</button>
            <button class="tab" id="tab-v" onclick="setDoc('vade')">VADE MECUM</button>
        </div>
        <iframe id="pdf-frame"></iframe>
        
        <div class="postit">
            <div style="font-size:0.6rem; font-weight:800; color:#854d0e; margin-bottom:4px">üìå TESES / ARTIGOS SALVOS</div>
            <textarea id="postit-text" oninput="savePostit()" placeholder="Ex: Art. 840 CLT..."></textarea>
        </div>
    </section>
