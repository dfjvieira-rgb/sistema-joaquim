<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aryanna Master Pro - OAB</title>
    <style>
        :root { --primary: #2c3e50; --accent: #e74c3c; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Sidebar lateral */
        #sidebar { width: 300px; background: var(--primary); color: white; padding: 15px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; }
        .btn-peca { background: #34495e; border: none; color: white; padding: 10px; text-align: left; cursor: pointer; border-radius: 4px; transition: 0.3s; }
        .btn-peca:hover { background: var(--accent); }
        
        /* √Årea de Pr√°tica (Folha de Respostas) */
        #main-content { flex: 1; display: flex; flex-direction: column; padding: 20px; gap: 15px; position: relative; }
        #editor { flex: 1; width: 100%; padding: 20px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; line-height: 1.5; resize: none; background: #fff; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
        
        /* Espelho de Corre√ß√£o (FGV Style) */
        #espelho-container { width: 350px; background: #fff; border-left: 2px solid #ddd; padding: 15px; overflow-y: auto; }
        .espelho-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 0; border-bottom: 1px solid #eee; font-size: 13px; }
        .espelho-txt { flex: 1; }
        .espelho-pt { font-weight: bold; color: var(--accent); }
        #nota-final { font-size: 24px; font-bold; text-align: center; padding: 20px; background: var(--primary); color: white; border-radius: 8px; margin-top: 10px; }

        /* Post-its e Dicas */
        .post-it { background: #fffa90; padding: 10px; border-radius: 5px; box-shadow: 2px 2px 5px rgba(0,0,0,0.2); margin-bottom: 10px; color: #333; font-size: 14px; }
        
        .header-controls { display: flex; justify-content: space-between; align-items: center; }
        select { padding: 8px; border-radius: 4px; }
    </style>
</head>
<body>

    <aside id="sidebar">
        <h3>Pe√ßas Base</h3>
        <button class="btn-peca" onclick="carregarEstrutura('RT')">Reclama√ß√£o Trabalhista</button>
        <button class="btn-peca" onclick="carregarEstrutura('CON')">Contesta√ß√£o</button>
        <button class="btn-peca" onclick="carregarEstrutura('RO')">Recurso Ordin√°rio</button>
        <button class="btn-peca" onclick="carregarEstrutura('AP')">Agravo de Peti√ß√£o</button>
        <button class="btn-peca" onclick="carregarEstrutura('MS')">Mandado de Seguran√ßa</button>
        
        <hr>
        <h3>Post-its / Dicas</h3>
        <div class="post-it">üìå <b>Dica FGV:</b> Sempre indique o fundamento legal (Artigo/S√∫mula) para pontuar no m√©rito.</div>
        <div id="meus-postits"></div>
        <button class="btn-peca" style="background:var(--accent)" onclick="addPostIt()">+ Novo Lembrete</button>
    </aside>

    <main id="main-content">
        <div class="header-controls">
            <h2>Folha de Respostas (Simulado)</h2>
            <div>
                <label>Carregar Espelho FGV:</label>
                <select id="select-espelho" onchange="carregarEspelho(this.value)">
                    <option value="">Selecione a Prova...</option>
                    <option value="44">44¬∫ Exame (Contesta√ß√£o)</option>
                    <option value="41">41¬∫ Exame (Agravo de Peti√ß√£o)</option>
                    <option value="40">40¬∫ Exame (Reclama√ß√£o)</option>
                    <option value="37">37¬∫ Exame (Contesta√ß√£o)</option>
                    <option value="35">35¬∫ Exame (Recurso Ordin√°rio)</option>
                </select>
                <button onclick="salvarProgresso()">üíæ Salvar Treino</button>
            </div>
        </div>
        <textarea id="editor" placeholder="Comece a redigir sua pe√ßa aqui..."></textarea>
    </main>

    <section id="espelho-container">
        <h3>Espelho de Corre√ß√£o</h3>
        <div id="itens-espelho">
            <p style="color:gray">Selecione uma prova acima para corrigir.</p>
        </div>
        <div id="nota-final">Nota: 0,00</div>
    </section>

    <script type="module">
        import { DATA_MASTER } from './estruturas.js';

        // Torna as fun√ß√µes globais para o HTML acessar
        window.carregarEstrutura = (tipo) => {
            const editor = document.getElementById('editor');
            if(confirm("Isso limpar√° seu texto atual. Continuar?")) {
                editor.value = DATA_MASTER.estruturas[tipo];
            }
        };

        window.carregarEspelho = (id) => {
            const container = document.getElementById('itens-espelho');
            if (DATA_MASTER.espelhos[id]) {
                container.innerHTML = DATA_MASTER.espelhos[id];
                window.calcNota();
            }
        };

        window.calcNota = () => {
            const checks = document.querySelectorAll('#itens-espelho input[type="checkbox"]');
            let total = 0;
            checks.forEach(c => {
                if(c.checked) total += parseFloat(c.value);
            });
            document.getElementById('nota-final').innerText = `Nota: ${total.toFixed(2)}`;
        };

        window.addPostIt = () => {
            const msg = prompt("Digite seu lembrete de estudo:");
            if(msg) {
                const div = document.createElement('div');
                div.className = 'post-it';
                div.innerHTML = `üìù ${msg}`;
                document.getElementById('meus-postits').appendChild(div);
                localStorage.setItem('meus_postits', document.getElementById('meus-postits').innerHTML);
            }
        };

        window.salvarProgresso = () => {
            const texto = document.getElementById('editor').value;
            localStorage.setItem('ultimo_treino', texto);
            alert("Progresso salvo no navegador!");
        };

        // Carregar dados salvos ao abrir
        window.onload = () => {
            if(localStorage.getItem('ultimo_treino')) {
                document.getElementById('editor').value = localStorage.getItem('ultimo_treino');
            }
            if(localStorage.getItem('meus_postits')) {
                document.getElementById('meus-postits').innerHTML = localStorage.getItem('meus_postits');
            }
        };
    </script>
</body>
</html>
