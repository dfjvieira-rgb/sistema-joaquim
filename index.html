<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>JOAQUIM ELITE 2026 - SISTEMA REGENERADO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #020617; --gold: #fbbf24; --bg-paper: #0f172a; --paper-color: #1e293b; --text-color: #f8fafc; --line-color: #334155; --sidebar-w: 80px; }
        body { font-family: 'Inter', sans-serif; background: var(--primary); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; color: white; }
        header { height: 60px; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--gold); }
        main { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: var(--sidebar-w); background: #1e293b; display: flex; flex-direction: column; gap: 10px; padding: 10px; border-right: 1px solid #334155; }
        #radar-container { background: #000; border: 2px solid var(--gold); border-radius: 6px; padding: 8px; text-align: center; min-height: 70px; }
        #radar-status { font-size: 0.7rem; font-weight: 900; color: var(--gold); }
        .editor-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; justify-content: center; }
        .paper { background: white; width: 100%; max-width: 850px; min-height: 1200px; color: #1e293b; }
        .linha-wrapper { display: flex; border-bottom: 1px solid #e2e8f0; height: 32px; }
        .linha-num { width: 40px; font-size: 0.7rem; color: #94a3b8; display: flex; align-items: center; justify-content: center; border-right: 1px solid #e2e8f0; }
        .linha-folha { flex: 1; border: none; outline: none; padding: 0 10px; font-size: 18px; font-family: 'Courier New', monospace; }
        .btn-side { width: 100%; height: 50px; border-radius: 8px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: white; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; align-items: center; justify-content: center; }
        .modal-body { background: white; padding: 20px; border-radius: 12px; width: 300px; color: black; }
        .opt-btn { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <div style="font-weight:900">JOAQUIM <span style="color:var(--gold)">ELITE 2026</span></div>
    <button onclick="resetar()" style="background:red; color:white; border:none; padding:10px; border-radius:5px">LIMPAR TUDO</button>
</header>

<main>
    <aside class="sidebar">
        <div id="radar-container">
            <div style="font-size:0.5rem">RADAR</div>
            <div id="radar-status">AGUARDANDO</div>
        </div>
        <button class="btn-side" style="background:var(--gold); color:black" onclick="abrirModalExames()"><i class="fas fa-bullseye"></i></button>
        <button class="btn-side" style="background:#3b82f6" onclick="abrirModalPecas()"><i class="fas fa-scroll"></i></button>
        <button class="btn-side" style="background:#10b981" onclick="window.print()"><i class="fas fa-print"></i></button>
    </aside>

    <section class="editor-container">
        <div class="paper" id="folha-total"></div>
    </section>
</main>

<div id="modal-geral" class="modal">
    <div class="modal-body">
        <h3 id="modal-titulo">SELECIONE</h3>
        <div id="modal-lista"></div>
        <button onclick="fecharModal()" style="width:100%; margin-top:10px">FECHAR</button>
    </div>
</div>

<script>
    // 1. DADOS DE EMERGÊNCIA (Caso os arquivos .js falhem)
    const MOCK_ESPELHOS = { "44": "RECURSO ORDINÁRIO", "43": "CONTESTAÇÃO", "42": "RECURSO ORDINÁRIO", "41": "RECLAMAÇÃO TRABALHISTA" };
    const MOCK_PECAS = { "PETIÇÃO INICIAL": "AO JUÍZO DA ___ VARA DO TRABALHO...", "DEFESA": "AO JUÍZO DA... \nPROCESSO Nº...", "RECURSO": "AO JUÍZO DA... \nRECORRENTE:..." };

    let exameAtivo = "44";
    let ultimaLinha = 1;

    // 2. CONSTRUÇÃO DA FOLHA
    function criarFolha() {
        const folha = document.getElementById('folha-total');
        folha.innerHTML = '';
        for(let i=1; i<=150; i++) {
            const wrap = document.createElement('div');
            wrap.className = 'linha-wrapper';
            wrap.innerHTML = `<div class="linha-num">${i}</div><input class="linha-folha" id="L${i}" maxlength="85">`;
            const input = wrap.querySelector('input');
            input.onfocus = () => { ultimaLinha = i; };
            folha.appendChild(wrap);
        }
        atualizarRadar();
    }

    // 3. RADAR (Sem dependência externa)
    function atualizarRadar() {
        const status = document.getElementById('radar-status');
        const radar = document.getElementById('radar-container');
        const peca = MOCK_ESPELHOS[exameAtivo] || "PEÇA LIVRE";
        
        status.innerText = peca;
        radar.style.borderColor = peca.includes("RECURSO") ? "#3b82f6" : (peca.includes("CONTEST") ? "#22c55e" : "#fbbf24");
    }

    // 4. MODAIS
    function abrirModalExames() {
        const lista = document.getElementById('modal-lista');
        lista.innerHTML = '';
        document.getElementById('modal-titulo').innerText = "EXAMES OAB";
        for(let i=44; i>=35; i--) {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = "Exame " + i;
            btn.onclick = () => { exameAtivo = i.toString(); atualizarRadar(); fecharModal(); alert("Exame alterado!"); };
            lista.appendChild(btn);
        }
        document.getElementById('modal-geral').style.display = 'flex';
    }

    function abrirModalPecas() {
        const lista = document.getElementById('modal-lista');
        lista.innerHTML = '';
        document.getElementById('modal-titulo').innerText = "ESTRUTURAS";
        Object.keys(MOCK_PECAS).forEach(k => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = k;
            btn.onclick = () => {
                const linhas = MOCK_PECAS[k].split('\n');
                linhas.forEach((txt, idx) => {
                    const el = document.getElementById(`L${ultimaLinha + idx}`);
                    if(el) el.value = txt.trim();
                });
                fecharModal();
            };
            lista.appendChild(btn);
        });
        document.getElementById('modal-geral').style.display = 'flex';
    }

    function fecharModal() { document.getElementById('modal-geral').style.display = 'none'; }
    function resetar() { if(confirm("Limpar?")) document.querySelectorAll('.linha-folha').forEach(l => l.value = ''); }

    window.onload = criarFolha;
</script>
</body>
</html>
