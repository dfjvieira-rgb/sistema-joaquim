const escaneamentoElite = () => {
    const sidebarStatus = document.getElementById('radar-status');
    const boxSidebar = document.getElementById('radar-container');
    const topoFolha = document.getElementById('identificador-peca');
    
    // 1. Pega o texto e limpa espaços extras
    const textoCru = Array.from(document.querySelectorAll('.linha-folha'))
                          .map(input => input.value)
                          .join(' ');

    // 2. Normalização: Remove acentos e deixa em maiúsculo para comparação limpa
    const textoNormalizado = textoCru.normalize("NFD")
                                     .replace(/[\u0300-\u036f]/g, "")
                                     .toUpperCase();

    const DICIONARIO = [
        { busca: "AGRAVO DE PETICAO", display: "AGRAVO DE PETIÇÃO", cor: "#f87171" },
        { busca: "RECURSO ORDINARIO", display: "RECURSO ORDINÁRIO", cor: "#3b82f6" },
        { busca: "CONTESTACAO", display: "CONTESTAÇÃO TRABALHISTA", cor: "#22c55e" },
        { busca: "RECLAMACAO", display: "RECLAMATÓRIA TRABALHISTA", cor: "#a855f7" },
        { busca: "MANDADO DE SEGURANCA", display: "MANDADO DE SEGURANÇA", cor: "#06b6d4" }
    ];

    // 3. Busca no texto normalizado usando o termo sem acento
    let encontrado = DICIONARIO.find(p => textoNormalizado.includes(p.busca));

    if (encontrado) {
        sidebarStatus.innerHTML = `<span style="color:${encontrado.cor}">RADAR</span><br>${encontrado.busca}`;
        boxSidebar.style.borderColor = encontrado.cor;
        boxSidebar.classList.remove('radar-blink');
        topoFolha.innerText = encontrado.display;
        topoFolha.style.color = encontrado.cor;
        topoFolha.style.borderBottomColor = encontrado.cor;
    } else {
        sidebarStatus.innerHTML = `<span>RADAR</span><br><span class="radar-blink">BUSCANDO...</span>`;
        boxSidebar.style.borderColor = "var(--gold)";
        topoFolha.innerText = "CADERNO DE RESPOSTAS";
        topoFolha.style.color = "#64748b";
        topoFolha.style.borderBottomColor = "var(--line-color)";
    }
};
