<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ARYANNA 2026 | SIMULADOR COMPLETO</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #0f172a; --gold: #fbbf24; --purple: #a855f7; --border: #94a3b8; --bg: #f1f5f9; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); }

        /* HEADER E BARRA DE FERRAMENTAS */
        header { 
            background: var(--primary); color: white; padding: 10px 20px; 
            display: flex; flex-direction: column; gap: 10px;
            position: sticky; top: 0; z-index: 1000; border-bottom: 3px solid var(--gold);
        }
        .top-bar { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .tool-bar { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; padding-bottom: 5px; }
        
        /* BOTÕES DE REFERÊNCIA (OS 12 BOTÕES) */
        .btn-tool { 
            padding: 8px 12px; border-radius: 6px; border: none; font-weight: 800; 
            font-size: 0.7rem; cursor: pointer; display: flex; align-items: center; gap: 5px;
            transition: 0.2s; text-transform: uppercase;
        }
        .btn-tool:hover { transform: translateY(-2px); filter: brightness(1.1); }
        
        .btn-pdf-p { background: #ef4444; color: white; } /* Prova */
        .btn-pdf-g { background: #22c55e; color: white; } /* Gabarito */
        .btn-vade { background: #3b82f6; color: white; }  /* Vade */
        .btn-ia { background: #000; color: white; }       /* IA */
        .btn-robot { background: var(--purple); color: white; } /* O NOVO ROBÔ */
        .btn-trophy { background: var(--gold); color: black; }  /* O NOVO TROFÉU */
        .btn-print { background: #64748b; color: white; }

        /* LAYOUT */
        .main-container { display: grid; grid-template-columns: 1fr 380px; gap: 20px; padding: 20px; }
        .folha-oab { background: white; padding: 40px; border: 1px solid var(--border); box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .linha-textarea { 
            width: 100%; border: none; line-height: 30px; font-size: 18px; 
            font-family: 'Courier New', monospace; resize: none; outline: none;
            background: repeating-linear-gradient(white, white 29px, #e2e8f0 30px);
        }

        .sidebar { display: flex; flex-direction: column; gap: 15px; }
        .mini-card { background: white; border: 2px solid var(--border); border-radius: 8px; padding: 12px; }
        .mini-card h4 { font-size: 0.7rem; margin-bottom: 8px; text-transform: uppercase; color: #64748b; }

        @media (max-width: 1000px) { .main-container { grid-template-columns: 1fr; } .sidebar { display: none; } }
    </style>
</head>
<body>

<header>
    <div class="top-bar">
        <div style="font-weight: 900; color: var(--gold);">ARYANNA 2026</div>
        <div id="timer" style="font-family: monospace; font-size: 1.4rem; font-weight: 800; color: var(--gold);">05:00:00</div>
        <select id="exame-select" onchange="trocarExame()" style="padding: 5px; border-radius: 4px; font-weight: 800;">
            <option value="44">EXAME 44</option>
            <option value="43">EXAME 43</option>
            <option value="42">EXAME 42</option>
        </select>
    </div>

    <div class="tool-bar">
        <button class="btn-tool btn-pdf-p" onclick="openPDF('prova')"><i class="fas fa-file-pdf"></i> P. PROVA</button>
        <button class="btn-tool btn-pdf-g" onclick="openPDF('gabarito')"><i class="fas fa-check-double"></i> G. OFICIAL</button>
        <button class="btn-tool btn-vade" onclick="openVade()"><i class="fas fa-book"></i> VADE MECUM</button>
        <button class="btn-tool btn-ia" onclick="askIA()"><i class="fas fa-lightbulb"></i> IA HELP</button>
        
        <button class="btn-tool btn-robot" onclick="abrirConsultor()"><i class="fas fa-robot"></i> CONSULTOR</button>
        
        <button class="btn-tool btn-trophy" onclick="irParaMentoria()"><i class="fas fa-trophy"></i> MENTORIA</button>
        
        <button class="btn-tool btn-print" onclick="window.print()"><i class="fas fa-print"></i> IMPRIMIR</button>
        <button class="btn-tool btn-vade" style="background:#0f172a" onclick="saveProgress()"><i class="fas fa-save"></i> SALVAR</button>
        <button class="btn-tool" style="background:#ec4899; color:white" onclick="alert('Cronômetro Zerado!')"><i class="fas fa-stopwatch"></i> ZERAR</button>
        <button class="btn-tool" style="background:#f97316; color:white" onclick="toggleSidebar()"><i class="fas fa-columns"></i> RADAR</button>
        <button class="btn-tool" style="background:#14b8a6; color:white" onclick="openCalculadora()"><i class="fas fa-calculator"></i> CALC.</button>
        <button class="btn-tool" style="background:#6366f1; color:white" onclick="finalizarEArquivar()"><i class="fas fa-archive"></i> ARQUIVAR</button>
    </div>
</header>

<div class="main-container">
    <main class="folha-oab">
        <div style="text-align: center; font-weight: 800; text-decoration: underline; margin-bottom: 20px;">FOLHA DE TEXTO DEFINITIVO - PEÇA PROFISSIONAL</div>
        <textarea id="texto-peca" class="linha-textarea" rows="60" placeholder="Escreva aqui sua peça..."></textarea>
    </main>

    <aside class="sidebar" id="sidebar">
        <div class="mini-card" style="border-top: 4px solid var(--purple);">
            <h4>Radar de Teses / Rascunho</h4>
            <textarea id="radar-texto" style="width:100%; height:150px; border:none; outline:none;" placeholder="Artigos e Súmulas..."></textarea>
        </div>
        <div class="mini-card" style="border-top: 4px solid #10b981;">
            <h4>Questões Discursivas</h4>
            <textarea id="questoes-texto" style="width:100%; height:300px; border:none; outline:none;" placeholder="Respostas das questões..."></textarea>
        </div>
        <div class="mini-card">
            <h4>Dica da Mentora</h4>
            <p style="font-size: 0.8rem; color: #475569;">"Não esqueça de verificar a tempestividade e o preparo!"</p>
        </div>
    </aside>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, set, onValue, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    const config = { 
        apiKey: "AIzaSyAmigODFK8R9c0-fWtagdxLWu9xkODfKYQ", 
        authDomain: "masteroab-db5e1.firebaseapp.com", 
        projectId: "masteroab-db5e1", 
        databaseURL: "https://masteroab-db5e1-default-rtdb.firebaseio.com" 
    };
    const app = initializeApp(config);
    const db = getDatabase(app);

    // Lógica de Sincronização
    window.saveProgress = () => {
        const exame = document.getElementById('exame-select').value;
        const texto = document.getElementById('texto-peca').value;
        const radar = document.getElementById('radar-texto').value;
        const questoes = document.getElementById('questoes-texto').value;
        set(ref(db, `estudos/${exame}`), { texto, radar, questoes, ts: serverTimestamp() });
    };

    window.finalizarEArquivar = () => {
        const exame = document.getElementById('exame-select').value;
        const texto = document.getElementById('texto-peca').value;
        const dataStr = new Date().toLocaleDateString('pt-BR');
        
        saveProgress();
        set(ref(db, `mentoria/historico/${exame}`), { exame, data: dataStr });
        alert("Arquivado no Histórico!");
    };

    window.trocarExame = () => {
        const exame = document.getElementById('exame-select').value;
        onValue(ref(db, `estudos/${exame}`), (snap) => {
            if(snap.exists()){
                document.getElementById('texto-peca').value = snap.val().texto || "";
                document.getElementById('radar-texto').value = snap.val().radar || "";
                document.getElementById('questoes-texto').value = snap.val().questoes || "";
            }
        });
    };

    trocarExame();
</script>

<script>
    // FUNÇÕES DOS BOTÕES
    function abrirConsultor() { window.open('mentoria.html?mode=consultor', '_blank'); }
    function irParaMentoria() { window.location.href = 'mentoria.html'; }
    function openPDF(tipo) { alert('Abrindo PDF de ' + tipo); }
    function openVade() { alert('Abrindo Vade Mecum'); }
    function askIA() { alert('IA analisando sua peça...'); }
    function toggleSidebar() { 
        const sb = document.getElementById('sidebar');
        sb.style.display = (sb.style.display === 'none' ? 'flex' : 'none');
    }

    // Timer 5h
    let s = 18000;
    setInterval(() => {
        if(s>0){
            s--;
            let h=Math.floor(s/3600), m=Math.floor((s%3600)/60), sec=s%60;
            document.getElementById('timer').innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
        }
    }, 1000);
</script>

</body>
</html>
