<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SISTEMA JOAQUIM PRO 2026</title>
    <style>
        :root { 
            --primary: #1a252f; --accent: #f1c40f; --bg: #f8f9fa; 
            --header-h: 60px; --drawer-w: 280px; --red: #e74c3c;
        }

        /* RESET E BASE */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* HEADER */
        header { 
            background: var(--primary); color: white; height: var(--header-h); 
            padding: 0 15px; display: flex; justify-content: space-between; align-items: center; 
            z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .timer { font-family: 'Courier New', monospace; font-weight: bold; font-size: 1.1rem; color: var(--accent); }

        /* MENU LATERAL (DRAWER) */
        .drawer { 
            position: fixed; top: 0; left: -100%; width: var(--drawer-w); height: 100%; 
            background: white; z-index: 2000; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 5px 0 15px rgba(0,0,0,0.3); 
        }
        .drawer.open { left: 0; }
        .drawer-header { background: var(--primary); color: white; padding: 40px 20px 20px; }
        .drawer-item { padding: 16px 20px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid #eee; cursor: pointer; color: #333; font-weight: 500; }
        .drawer-item:active { background: #f0f0f0; }

        /* VIEWS */
        .view { display: none; flex: 1; overflow: hidden; width: 100%; }
        .view.active { display: flex; flex-direction: column; }

        /* WORKSPACE: CADERNO + DICAS + PDF */
        .workspace { display: flex; flex: 1; overflow: hidden; }
        .col { display: flex; flex-direction: column; border-right: 1px solid #ddd; position: relative; }
        
        /* Colunas Largura */
        .col-respostas { flex: 1.2; background: white; }
        .col-dicas { flex: 0.7; background: #fffde7; }
        .col-apoio { flex: 1; background: #525659; }

        /* Cabe√ßalhos dos Cadernos */
        .caderno-header { padding: 8px 12px; font-size: 0.7rem; font-weight: bold; color: white; display: flex; justify-content: space-between; align-items: center; }
        .bg-oab { background: var(--primary); }
        .bg-dicas { background: #f39c12; }

        /* Papel Pautado (FGV Style) */
        .paper { 
            flex: 1; display: flex; overflow-y: auto; 
            background-image: linear-gradient(#e1e1e1 1px, transparent 1px);
            background-size: 100% 25px; background-attachment: local;
        }
        .line-nums { width: 40px; background: #f8f9fa; border-right: 1px solid #ddd; text-align: center; color: #bbb; font-size: 11px; line-height: 25px; padding-top: 25px; user-select: none; }
        
        textarea { 
            flex: 1; padding: 25px; border: none; outline: none; resize: none; 
            font-family: 'Times New Roman', Times, serif; font-size: 18px; line-height: 25px; 
            background: transparent; color: #2c3e50;
        }

        /* MURAL DE POST-ITS */
        #mural { padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; overflow-y: auto; background: #f0f2f5; flex: 1; }
        .postit { background: #fff59d; padding: 15px; border-radius: 4px; box-shadow: 2px 2px 8px rgba(0,0,0,0.1); min-height: 150px; position: relative; font-size: 0.9rem; line-height: 1.4; color: #333; }
        .postit-del { position: absolute; top: 5px; right: 5px; cursor: pointer; color: #cc0000; border: none; background: none; font-weight: bold; padding: 5px; }

        /* ESTRUTURAS (GERADOR) */
        .est-grid { padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; overflow-y: auto; background: #f0f2f5; flex: 1; }
        .est-card { background: white; padding: 20px; border-radius: 8px; border-left: 5px solid var(--accent); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .est-card h3 { font-size: 1rem; margin-bottom: 5px; color: var(--primary); }
        .est-card p { font-size: 0.75rem; color: #666; margin-bottom: 12px; }
        .btn-usar { background: var(--primary); color: white; border: none; padding: 10px; border-radius: 4px; width: 100%; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-usar:active { background: var(--accent); color: var(--primary); }

        /* OVERLAY */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1500; display: none; }
        .overlay.active { display: block; }

        /* RESPONSIVIDADE APP (MOBILE) */
        @media (max-width: 1024px) {
            .workspace { flex-direction: column; overflow-y: auto; }
            .col { width: 100%; height: 500px; flex: none; border-right: none; border-bottom: 2px solid #ddd; }
            .col-apoio { height: 400px; }
            textarea { font-size: 16px; } /* Evita zoom no iPhone */
            #mural { grid-template-columns: 1fr 1fr; }
        }

        @media (max-width: 600px) {
            #mural { grid-template-columns: 1fr; }
            .timer { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<header>
    <div onclick="toggleMenu()" style="cursor:pointer; font-size: 1.5rem; padding: 10px;">‚ò∞</div>
    <div style="font-weight:bold; letter-spacing:1px;">JOAQUIM <span style="color:var(--accent)">PRO</span></div>
    <div class="timer" id="timer">05:00:00</div>
</header>

<nav class="drawer" id="drawer">
    <div class="drawer-header">
        <b>Plano de Aprova√ß√£o</b>
        <p style="font-size:0.7rem; opacity:0.8;">M√©todo Aryanna Linhares</p>
    </div>
    <div class="drawer-item" onclick="showView('treino'); toggleMenu()">üìù Treinar Pe√ßa (Cadernos)</div>
    <div class="drawer-item" onclick="showView('estruturas'); toggleMenu()">üìë Gerador de Estruturas</div>
    <div class="drawer-item" onclick="showView('postits'); toggleMenu()">üìå Mural de Post-its</div>
    <div class="drawer-item" onclick="showView('apostila'); toggleMenu()">üìñ Ver Apostila PDF</div>
    <div style="margin-top: auto; padding: 20px;">
        <button onclick="limparCadernos()" style="width:100%; padding:10px; background:#eee; border:none; border-radius:4px; font-size:0.7rem; cursor:pointer;">Limpar Dados Salvos</button>
    </div>
</nav>

<main id="view-treino" class="view active">
    <div class="workspace">
        <section class="col col-respostas">
            <div class="caderno-header bg-oab">
                <span>RESPOSTA OFICIAL FGV</span>
                <span id="line-info">Linha: 1 / 150</span>
            </div>
            <div class="paper">
                <div class="line-nums" id="ln-res"></div>
                <textarea id="area-peca" oninput="sync()" placeholder="Redija a pe√ßa final aqui..."></textarea>
            </div>
        </section>

        <section class="col col-dicas">
            <div class="caderno-header bg-dicas">
                <span>üí° DICAS E RASCUNHO (AULA)</span>
            </div>
            <div class="paper" style="background-image: linear-gradient(#fff9c4 1px, transparent 1px);">
                <div class="line-nums" style="background:#fffde7;">‚Ä¢</div>
                <textarea id="area-dicas" oninput="sync()" placeholder="Anote aqui as dicas da Prof¬™ Aryanna para esta pe√ßa espec√≠fica..."></textarea>
            </div>
        </section>

        <section class="col col-apoio">
            <div style="background:#333; display:flex;">
                <button onclick="changePDF('./ro35.pdf')" style="flex:1; border:none; background:#444; color:white; padding:8px; font-size:0.7rem; cursor:pointer; border-right:1px solid #555;">PROVA</button>
                <button onclick="changePDF('./Aryanna Linhares.pdf')" style="flex:1; border:none; background:#444; color:white; padding:8px; font-size:0.7rem; cursor:pointer;">APOSTILA</button>
            </div>
            <iframe id="f-pdf" src="./ro35.pdf" style="flex:1; border:none; background:white;"></iframe>
        </section>
    </div>
</main>

<main id="view-estruturas" class="view">
    <div class="est-grid">
        <div class="est-card">
            <h3>Reclama√ß√£o Trabalhista</h3>
            <p>Art. 840, ¬ß1¬∫ da CLT. Estrutura completa de m√©rito.</p>
            <button class="btn-usar" onclick="gerarPeca('inicial')">CARREGAR MODELO</button>
        </div>
        <div class="est-card">
            <h3>Contesta√ß√£o</h3>
            <p>Art. 847 da CLT. Com Preliminares e Prejudiciais.</p>
            <button class="btn-usar" onclick="gerarPeca('contestacao')">CARREGAR MODELO</button>
        </div>
        <div class="est-card">
            <h3>Recurso Ordin√°rio</h3>
            <p>Art. 895, I da CLT. Interposi√ß√£o + Raz√µes.</p>
            <button class="btn-usar" onclick="gerarPeca('ro')">CARREGAR MODELO</button>
        </div>
        <div class="est-card">
            <h3>Agravo de Peti√ß√£o</h3>
            <p>Art. 897, 'a' da CLT. Delimita√ß√£o de mat√©rias.</p>
            <button class="btn-usar" onclick="gerarPeca('agravo')">CARREGAR MODELO</button>
        </div>
    </div>
</main>

<main id="view-postits" class="view">
    <div style="background:var(--primary); color:white; padding:15px; display:flex; justify-content:space-between; align-items:center;">
        <b>MEUS LEMBRETES</b>
        <button onclick="novoPostit()" style="background:var(--accent); border:none; padding:8px 15px; border-radius:4px; font-weight:bold; cursor:pointer;">+ NOTA</button>
    </div>
    <div id="mural"></div>
</main>

<main id="view-apostila" class="view">
    <iframe src="./Aryanna Linhares.pdf" style="width:100%; height:100%; border:none;"></iframe>
</main>

<script>
    // Gerar numera√ß√£o lateral do caderno
    const ln = document.getElementById('ln-res');
    for(let i=1; i<=150; i++) ln.innerHTML += i + '<br>';

    // Navega√ß√£o
    function toggleMenu() {
        document.getElementById('drawer').classList.toggle('open');
        document.getElementById('overlay').classList.toggle('active');
    }

    function showView(v) {
        document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
        document.getElementById('view-' + v).classList.add('active');
        if(v === 'postits') renderPostits();
    }

    function changePDF(src) {
        document.getElementById('f-pdf').src = src;
    }

    // Persist√™ncia de Dados (Local Storage)
    function sync() {
        const pVal = document.getElementById('area-peca').value;
        const dVal = document.getElementById('area-dicas').value;
        document.getElementById('line-info').innerText = `Linha: ${pVal.split('\n').length} / 150`;
        localStorage.setItem('joaquim_peca', pVal);
        localStorage.setItem('joaquim_dicas', dVal);
    }

    // Gerador de Pe√ßas (M√©todo Aryanna)
    function gerarPeca(tipo) {
        const area = document.getElementById('area-peca');
        let t = "";
        const ender = "AO DOUTO JU√çZO DA ... VARA DO TRABALHO DE ...\n\n\n\n\n";
        
        if(tipo === 'inicial') {
            t = ender + "NOME DO RECLAMANTE, j√° qualificado, por seu advogado, com fulcro no Art. 840, ¬ß1¬∫ da CLT, propor:\n\nRECLAMA√á√ÉO TRABALHISTA\n\nem face de NOME DA RECLAMADA...\n\nI - M√âRITO\n\nII - PEDIDOS\n\nIII - REQUERIMENTOS FINAIS";
        } else if(tipo === 'contestacao') {
            t = ender + "Processo n¬∫ ...\n\n\n\nNOME DA RECLAMADA, j√° qualificada, com fulcro no Art. 847 da CLT, apresentar CONTESTA√á√ÉO...";
        } else if(tipo === 'ro') {
            t = ender + "Processo n¬∫ ...\n\n\n\nNOME DO RECORRENTE, vem interpor RECURSO ORDIN√ÅRIO (Art. 895, I, CLT)...\n\n------------------\nRAZ√ïES DO RECURSO";
        } else if(tipo === 'agravo') {
            t = ender + "Processo n¬∫ ...\n\n\n\nNOME DO AGRAVANTE, com fulcro no Art. 897, 'a' da CLT, interpor AGRAVO DE PETI√á√ÉO...";
        }

        if(confirm("Deseja carregar este modelo? Isto apagar√° o texto atual do caderno.")) {
            area.value = t;
            showView('treino');
            sync();
        }
    }

    // L√≥gica de Post-its
    let postits = JSON.parse(localStorage.getItem('joaquim_postits')) || [];
    function novoPostit() {
        const nota = prompt("Escreva seu lembrete (Artigos, S√∫mulas, etc):");
        if(nota) {
            postits.push(nota);
            localStorage.setItem('joaquim_postits', JSON.stringify(postits));
            renderPostits();
        }
    }
    function renderPostits() {
        const m = document.getElementById('mural');
        m.innerHTML = '';
        postits.forEach((p, i) => {
            m.innerHTML += `<div class="postit"><button class="postit-del" onclick="delPostit(${i})">X</button>${p}</div>`;
        });
    }
    function delPostit(i) {
        postits.splice(i, 1);
        localStorage.setItem('joaquim_postits', JSON.stringify(postits));
        renderPostits();
    }

    function limparCadernos() {
        if(confirm("Deseja apagar todos os textos e post-its?")) {
            localStorage.clear();
            location.reload();
        }
    }

    // Carregamento Inicial
    window.onload = () => {
        document.getElementById('area-peca').value = localStorage.getItem('joaquim_peca') || "";
        document.getElementById('area-dicas').value = localStorage.getItem('joaquim_dicas') || "";
        sync();
    };

    // Timer de 5 horas
    let s = 18000;
    setInterval(() => {
        if(s > 0) {
            s--;
            let h = Math.floor(s/3600), m = Math.floor((s%3600)/60), sc = s%60;
            document.getElementById('timer').innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${sc.toString().padStart(2,'0')}`;
        }
    }, 1000);
</script>
</body>
</html>
