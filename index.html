<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ARYANNA MASTER 2026</title>
    <style>
        :root { --gold: #d4af37; --bg: #0f172a; --paper: #1e293b; --text: #f1f5f9; --border: #334155; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        header { background: #1e293b; padding: 10px; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; align-items: center; }
        .toolbar { background: #1e293b; padding: 8px; display: flex; gap: 8px; border-bottom: 1px solid var(--border); overflow-x: auto; }
        .btn { padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); background: #1e293b; color: white; cursor: pointer; font-size: 14px; }
        .main { flex: 1; display: flex; overflow: hidden; }
        .editor-container { flex: 1; display: flex; flex-direction: column; border-right: 1px solid var(--border); }
        .paper { flex: 1; padding: 20px; overflow-y: auto; background: rgba(0,0,0,0.2); }
        .sheet { background: var(--paper); max-width: 800px; margin: 0 auto; min-height: 1000px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); display: flex; }
        .lines { width: 40px; border-right: 1px solid var(--border); color: #64748b; text-align: center; padding-top: 15px; font-size: 12px; line-height: 28px; }
        .area { flex: 1; background: transparent; border: none; outline: none; padding: 15px; color: #93c5fd; font-size: 16px; line-height: 28px; resize: none; font-family: 'Courier Prime', monospace; }
        #menu-pecas { display: none; position: absolute; top: 100px; left: 50px; background: #1e293b; border: 1px solid var(--gold); z-index: 1000; width: 250px; max-height: 70vh; overflow-y: auto; }
        .menu-item { padding: 10px; border-bottom: 1px solid var(--border); cursor: pointer; font-size: 13px; }
        .menu-item:hover { background: var(--gold); color: black; }
        .modal { display: none; position: fixed; inset: 0; background: var(--bg); z-index: 2000; flex-direction: column; }
        .modal-header { padding: 15px; background: #1e293b; border-bottom: 2px solid var(--gold); display: flex; justify-content: space-between; }
    </style>
</head>
<body class="dark-mode">
<header>
    <div style="color:var(--gold); font-weight:800;">ARYANNA MASTER PRO</div>
    <select id="exam-select" onchange="mudarExame()" style="background:#0f172a; color:white; border:1px solid var(--gold); padding:5px;"></select>
</header>

<div class="toolbar">
    <button class="btn" onclick="toggleMenu()">‚öñÔ∏è PE√áAS</button>
    <button class="btn" onclick="abrirModal('modal-res')">üìö RESPOSTAS (POST-IT)</button>
    <button class="btn" onclick="abrirModal('modal-dicas')">üí° DICAS</button>
</div>

<div class="main">
    <div class="editor-container">
        <div class="paper">
            <div class="sheet">
                <div class="lines" id="ln-main"></div>
                <textarea id="txt-peca" class="area" oninput="save('treino', this.value)"></textarea>
            </div>
        </div>
    </div>
</div>

<div id="menu-pecas"></div>

<div id="modal-res" class="modal">
    <div class="modal-header"><button class="btn" onclick="fecharModal('modal-res')">X FECHAR</button> <b>RESPOSTAS FGV</b></div>
    <div class="paper"><div class="sheet"><div class="lines" id="ln-res"></div><textarea id="txt-res" class="area" oninput="save('respostas', this.value)"></textarea></div></div>
</div>

<div id="modal-dicas" class="modal">
    <div class="modal-header"><button class="btn" onclick="fecharModal('modal-dicas')">X FECHAR</button> <b>DICAS E MACETES</b></div>
    <div class="paper"><div class="sheet"><div class="lines" id="ln-dicas"></div><textarea id="txt-dicas" class="area" oninput="save('dicas', this.value)"></textarea></div></div>
</div>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, set, get } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    const config = { 
        apiKey: "AIzaSyAmigODFK8R9c0-fWtagdxLWu9xkODfKYQ", 
        authDomain: "masteroab-db5e1.firebaseapp.com", 
        projectId: "masteroab-db5e1", 
        databaseURL: "https://masteroab-db5e1-default-rtdb.firebaseio.com" 
    };
    const app = initializeApp(config);
    const db = getDatabase(app);

    const pecasMap = {
        'RT': 'AO DOUTO JU√çZO DA ... VARA DO TRABALHO...\n\nRECLAMA√á√ÉO TRABALHISTA',
        'CON': 'AO DOUTO JU√çZO DA ... VARA DO TRABALHO...\n\nCONTESTA√á√ÉO',
        'RO': 'AO DOUTO JU√çZO DA ... VARA DO TRABALHO...\n\nRECURSO ORDIN√ÅRIO',
        'RECONV': 'DA RECONVEN√á√ÉO...',
        'CONSIGN': 'A√á√ÉO DE CONSIGNA√á√ÉO EM PAGAMENTO...',
        'INQUERITO': 'INQU√âRITO PARA APURA√á√ÉO DE FALTA GRAVE...',
        'RR': 'RECURSO DE REVISTA...',
        'ED': 'EMBARGOS DE DECLARA√á√ÉO...',
        'AI': 'AGRAVO DE INSTRUMENTO...',
        'AP': 'AGRAVO DE PETI√á√ÉO...',
        'EMB_EXEC': 'EMBARGOS √Ä EXECU√á√ÉO...',
        'EXC_PRE': 'EXCE√á√ÉO DE PR√â-EXECUTIVIDADE...',
        'MS': 'MANDADO DE SEGURAN√áA...',
        'AR': 'A√á√ÉO RESCIS√ìRIA...',
        'EMB_TER': 'EMBARGOS DE TERCEIRO...',
        'CONTRA': 'CONTRARRAZ√ïES...',
        'ADESIVO': 'RECURSO ADESIVO...',
        'HC': 'HABEAS CORPUS...'
    };

    window.save = (tipo, val) => {
        const ex = document.getElementById('exam-select').value;
        set(ref(db, `v3_${tipo}/exame_${ex}`), val);
    };

    window.mudarExame = async () => {
        const ex = document.getElementById('exam-select').value;
        const s1 = await get(ref(db, `v3_treino/exame_${ex}`));
        document.getElementById('txt-peca').value = s1.val() || "";
        const s2 = await get(ref(db, `v3_respostas/exame_${ex}`));
        document.getElementById('txt-res').value = s2.val() || "";
        const s3 = await get(ref(db, `v3_dicas/exame_${ex}`));
        document.getElementById('txt-dicas').value = s3.val() || "";
    };

    window.gerarPeca = (k) => {
        document.getElementById('txt-peca').value = pecasMap[k];
        window.save('treino', pecasMap[k]);
        toggleMenu();
    };

    // Auxiliares
    window.toggleMenu = () => { const m = document.getElementById('menu-pecas'); m.style.display = m.style.display === 'block' ? 'none' : 'block'; };
    window.abrirModal = (id) => document.getElementById(id).style.display = 'flex';
    window.fecharModal = (id) => document.getElementById(id).style.display = 'none';

    // Inicializa√ß√£o
    const sel = document.getElementById('exam-select');
    for(let i=45; i>=35; i--) { sel.innerHTML += `<option value="${i}">EXAME ${i}</option>`; }
    
    const menu = document.getElementById('menu-pecas');
    Object.keys(pecasMap).forEach(k => { menu.innerHTML += `<div class="menu-item" onclick="gerarPeca('${k}')">${k}</div>`; });

    const linhas = (id, n) => document.getElementById(id).innerHTML = Array.from({length:n}, (_,i)=>i+1).join('<br>');
    linhas('ln-main', 200); linhas('ln-res', 100); linhas('ln-dicas', 100);

    mudarExame();
</script>
</body>
</html>
