<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ARYANNA MASTER | MENTORIA POPULADA</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --blue: #2563eb; --fgv: #1e293b; --bg: #f1f5f9; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        header { background: #000; color: var(--gold); padding: 15px; text-align: center; font-weight: 900; border-bottom: 4px solid var(--gold); position: relative; flex-shrink: 0; }
        .back-btn { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: var(--gold); text-decoration: none; border: 1px solid var(--gold); padding: 5px 10px; border-radius: 4px; font-size: 11px; font-weight: 700; }

        .layout { flex: 1; display: flex; overflow: hidden; }

        /* PAINEL DE CONSULTA (ESQUERDA) */
        .sidebar-consulta { width: 350px; background: #fff; border-right: 2px solid #ddd; display: flex; flex-direction: column; padding: 15px; overflow-y: auto; }
        .sidebar-consulta h3 { font-size: 12px; text-transform: uppercase; margin-bottom: 10px; color: var(--fgv); border-bottom: 2px solid var(--gold); padding-bottom: 5px; }
        
        /* √ÅREA DA FOLHA DE RESPOSTAS (DIREITA) */
        .main-sheet { flex: 1; display: flex; flex-direction: column; padding: 15px; background: #cbd5e1; overflow-y: auto; align-items: center; }
        .sheet-container { width: 100%; max-width: 700px; display: flex; flex-direction: column; height: 100%; }

        .vade-btn { background: var(--blue); color: white; text-align: center; padding: 12px; border-radius: 8px; text-decoration: none; font-weight: 800; margin-bottom: 10px; display: block; font-size: 13px; }
        
        .tabs { display: flex; gap: 4px; }
        .tab { flex: 1; padding: 12px; background: #94a3b8; border: 2px solid var(--fgv); border-bottom: none; border-radius: 8px 8px 0 0; font-weight: 800; font-size: 11px; cursor: pointer; color: #fff; text-transform: uppercase; }
        .tab.active { background: white; color: var(--blue); padding-bottom: 15px; margin-bottom: -2px; z-index: 5; }
        
        .sheet-box { background: white; border: 2px solid var(--fgv); flex: 1; display: flex; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.1); min-height: 450px; }
        .sheet-label { background: var(--fgv); color: white; padding: 8px 15px; font-size: 11px; font-weight: 900; letter-spacing: 1px; }
        .editor { flex: 1; border: none; outline: none; padding: 20px; font-size: 16px; line-height: 25px; color: #1e3a8a; background-image: linear-gradient(transparent 24px, #f1f5f9 25px); background-size: 100% 25px; resize: none; }

        .search-box { background: #f8fafc; border: 1px solid #ddd; padding: 10px; border-radius: 8px; margin-bottom: 15px; }
        .search-box select, .search-box button { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; font-weight: bold; cursor: pointer; }

        @media (max-width: 800px) { 
            .layout { flex-direction: column; } 
            .sidebar-consulta { width: 100%; height: auto; border-right: none; border-bottom: 2px solid #ddd; }
            .main-sheet { padding: 10px; }
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="back-btn">‚¨Ö TREINAR PE√áA</a>
    CENTRAL DE MENTORIA | ARYANNA MASTER
</header>

<div class="layout">
    <aside class="sidebar-consulta">
        <h3>üìñ Apostilas e Arquivos</h3>
        <a href="vade.pdf" target="_blank" class="vade-btn">VADE MECUM TRABALHISTA</a>
        <a href="teses_aryanna.pdf" target="_blank" class="vade-btn" style="background:#059669">TESES ACUMULADAS (PDF)</a>
        
        <div class="search-box">
            <h3>üîç Provas e Gabaritos</h3>
            <label style="font-size: 10px; font-weight: bold;">SELECIONAR EXAME:</label>
            <select id="exame-pop">
                </select>
            <button onclick="abrirDoc('caderno')" style="background: #e2e8f0;">VER ENUNCIADO</button>
            <button onclick="abrirDoc('espelho')" style="background: #e2e8f0;">VER GABARITO (Padr√£o)</button>
        </div>

        <div style="font-size: 11px; color: #64748b; line-height: 1.4;">
            <strong>DICA:</strong> Abra o gabarito ao lado, identifique as teses da Aryanna e transcreva para a folha de mentoria √† direita para salvar no seu banco de dados.
        </div>
    </aside>

    <main class="main-sheet">
        <div class="sheet-container">
            <div class="tabs">
                <button id="tab0" class="tab active" onclick="change(0)">üìå TESES</button>
                <button id="tab1" class="tab" onclick="change(1)">üí° DICAS</button>
                <button id="tab2" class="tab" onclick="change(2)">‚úÖ CHECKLIST</button>
            </div>
            <div class="sheet-box">
                <div class="sheet-label" id="label-txt">FUNDAMENTA√á√ÉO E TESES</div>
                <textarea id="mentoria-text" class="editor" placeholder="Popule aqui suas teses baseadas nas apostilas e gabaritos..." oninput="save()"></textarea>
            </div>
            <div id="save-status" style="text-align:center; font-size:10px; color:#94a3b8; padding:5px; font-weight:bold;">Sincronizado</div>
        </div>
    </main>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
    
    const config = { 
        apiKey: "AIzaSyAmigODFK8R9c0-fWtagdxLWu9xkODfKYQ", 
        authDomain: "masteroab-db5e1.firebaseapp.com", 
        projectId: "masteroab-db5e1", 
        databaseURL: "https://masteroab-db5e1-default-rtdb.firebaseio.com" 
    };
    const app = initializeApp(config); const db = getDatabase(app);

    // POPULAR SELECT DE EXAMES
    const sel = document.getElementById('exame-pop');
    for(let i=45; i>=1; i--) {
        let n = i < 10 ? "0"+i : i;
        let opt = document.createElement('option'); opt.value = n; opt.innerText = `EXAME ${n}`;
        if(i==36) opt.selected = true;
        sel.appendChild(opt);
    }

    window.abrirDoc = (tipo) => {
        const ex = sel.value;
        const link = tipo === 'caderno' 
            ? `https://oab.fgv.br/arquivos/Exame_${ex}_Caderno_Trabalho.pdf`
            : `https://oab.fgv.br/arquivos/Exame_${ex}_Padrao_Trabalho.pdf`;
        window.open(link, '_blank');
    };

    // LOGICA DAS ABAS E FIREBASE
    let active = 0; let store = { t: "", d: "", c: "" };
    const labels = ["FUNDAMENTA√á√ÉO E TESES", "DICAS ESTRAT√âGICAS DA AULA", "CHECKLIST DE CONFER√äNCIA"];

    window.change = (idx) => {
        active = idx;
        document.querySelectorAll('.tab').forEach((t, i) => t.classList.toggle('active', i === idx));
        document.getElementById('label-txt').innerText = labels[idx];
        const area = document.getElementById('mentoria-text');
        area.value = idx === 0 ? store.t : (idx === 1 ? store.d : store.c);
    };

    window.save = () => {
        const val = document.getElementById('mentoria-text').value;
        if(active === 0) store.t = val; else if(active === 1) store.d = val; else store.c = val;
        
        document.getElementById('save-status').innerText = "Salvando...";
        set(ref(db, 'mentoria_v8_full'), store).then(() => {
            document.getElementById('save-status').innerText = "‚úì Sincronizado";
        });
    };

    onValue(ref(db, 'mentoria_v8_full'), (s) => { 
        if(s.exists()) { store = s.val(); change(active); } 
    });
</script>
</body>
</html>
